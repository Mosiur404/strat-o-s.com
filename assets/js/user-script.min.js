window.addEventListener("load", function () {
  const sliders = document.querySelectorAll("#asystem-slider");
  if (sliders.length) {
    sliders.forEach((currentSlide) => {
      const slide = new Swiper(currentSlide, {
        effect: "fade",
        fadeEffect: {
          crossFade: true,
        },
        slidesPerView: 1,
        navigation: {
          nextEl: ".pagination-next",
        },
        loop: true,
      });
      const titles = Array.from(document.querySelectorAll("#asystemTitle"));

      titles.forEach((title, index) => {
        title.addEventListener("mouseover", () => {
          slide.slideTo(index + 1);
          const sibling = titles.filter((e) => e != title);
          title.classList.add("active");
          sibling.forEach((e) => {
            e.classList.remove("active");
          });
        });
      });
    });
  }

  const BREAKPOINT = 992;
  const sliderMobile = document.querySelectorAll("#asystemMobile-slider");
  let slidesArray = [];

  const initSlides = () => {
    if (sliderMobile.length && window.innerWidth < BREAKPOINT) {
      sliderMobile.forEach((currentSlide) => {
        const slide = new Swiper(currentSlide, {
          effect: "slide",
          fadeEffect: {
            crossFade: true,
          },
          slidesPerView: 1,
          loop: true,
          centeredSlides: true,
          navigation: {
            nextEl: ".elementor-swiper-button-next",
            prevEl: ".elementor-swiper-button-prev",
          },
        });

        slidesArray.push(slide);
      });
    }
  };
  initSlides();

  window.addEventListener("resize", () => {
    // if screen > 900
    if (window.innerWidth > BREAKPOINT) {
      slidesArray.forEach((e) => {
        e.destroy();
      });
      if (!slidesArray.length) slidesArray = [];
    } else {
      // if screen < 900
      if (!slidesArray.length && sliderMobile.length) initSlides();
    }
  });
});
